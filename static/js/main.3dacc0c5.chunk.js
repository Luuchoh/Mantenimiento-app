(this["webpackJsonpcrud-firebase"]=this["webpackJsonpcrud-firebase"]||[]).push([[0],{231:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(48),s=a.n(c),i=a(14),o=a(234),l=a(99),d=a(12),u=a(6),b="[Dog] New Dog",j="[Dog] Load Dog",m="[Dog] Delete Dog",p="[Dog] Active Dog",h="[Dog] Clear Dog",f="[Dog] Listado unico",x={dog:[],search:[],active:{url:"",name:"",description:""}},O="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,v=Object(o.b)({dog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(u.a)(Object(u.a)({},e),{},{dog:[t.payload].concat(Object(d.a)(e.dog))});case j:case f:return Object(u.a)(Object(u.a)({},e),{},{dog:Object(d.a)(t.payload)});case p:return Object(u.a)(Object(u.a)({},e),{},{active:Object(u.a)({},t.payload)});case h:return Object(u.a)(Object(u.a)({},e),{},{active:{url:"",name:"",description:""}});default:return e}}}),g=Object(o.d)(v,O(Object(o.a)(l.a))),y=(a(113),a(114),a(22)),N=a(5),w=a(31),k=a(4),D=a.n(k),S=a(11),C=a(54),E=a(27),B=a(53);a(232);B.a.initializeApp({apiKey:"AIzaSyCy4tyJjmpe2IGlBwIDVym6EQinArA6Mpk",authDomain:"mantenimiento-dcfa9.firebaseapp.com",projectId:"mantenimiento-dcfa9",storageBucket:"mantenimiento-dcfa9.appspot.com",messagingSenderId:"969180945056",appId:"1:969180945056:web:8ae53fdece0ddf560707c5",measurementId:"G-6P5KKZDZ7S"});var _=B.a.firestore(),P=a(19),q=a.n(P),I=function(){var e=Object(S.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!t){e.next=10;break}return e.next=4,_.collection("/Dog").where("name","==",t).get();case 4:n=e.sent,console.log("DogStore"),console.log(n),n.forEach((function(e){a.push(Object(u.a)({id:e.id},e.data()))})),e.next=14;break;case 10:return e.next=12,_.collection("/Dog").get();case 12:e.sent.forEach((function(e){a.push(Object(u.a)({id:e.id},e.data()))}));case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(S.a)(D.a.mark((function e(t){var a,n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/dthcn5bpf/image/upload",(a=new FormData).append("upload_preset","image-task"),a.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/dthcn5bpf/image/upload",{method:"POST",body:a});case 7:if(!(n=e.sent).ok){e.next=15;break}return e.next=11,n.json();case 11:return r=e.sent,e.abrupt("return",r.secure_url);case 15:return e.next=17,n.json();case 17:throw e.sent;case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(4),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=[];return Object(S.a)(D.a.mark((function a(){return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return q.a.fire({title:"Uploading...",text:"Please wait ...",allowOutsideClick:!1,onBeforeOpen:function(){q.a.showLoading()}}),a.next=3,A(e);case 3:return t=a.sent,q.a.close(),a.abrupt("return",t);case 6:case"end":return a.stop()}}),a)})))},U=function(e){return{type:b,payload:Object(u.a)({},e)}},F=function(){return function(){var e=Object(S.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:a=e.sent,t(M(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},M=function(e){return{type:j,payload:e}},R=function(e){return function(){var t=Object(S.a)(D.a.mark((function t(a){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.doc("Dog/".concat(e)).delete();case 2:a(T(e)),q.a.fire({position:"top-end",icon:"success",title:"Delete",showConfirmButton:!1,timer:1500}),a(F());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return{type:m,payload:e}},V=function(){return{type:h}},J=a(2),K=function(e){var t=e.active,a=Object(i.b)(),n=Object(C.a)({initialValues:Object(u.a)({},t),validationSchema:E.a({url:E.b().url().required("URL requerido"),name:E.b().min(2,"El nombre es muy corto").required("Escribe tu contrase\xf1a."),description:E.b().min(50,"Porfavor especifica mas tu mascota").required("Mensaje requerido!")}),onSubmit:function(){var e,r;console.log(n),""===t.name?(a((r=n.values,console.log(r),function(){var e=Object(S.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:r.url,name:r.name,description:r.description},e.prev=1,e.next=4,_.collection("/Dog").doc().set(a);case 4:q.a.fire({position:"top-end",text:"Perro Creado",icon:"success",title:r.name,showConfirmButton:!1,timer:1500}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),q.a.fire({icon:"error",title:"Oops...",text:e.t0,footer:""});case 10:t(U(a)),t(F());case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}())),n.resetForm()):""!==t.id&&a((e=n.values,function(){var t=Object(S.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("perro",e),e.url||delete e.url,n={url:e.url,name:e.name,description:e.description},delete Object(u.a)({},n).id,console.log(e.id),q.a.fire({title:"Uploading...",text:"Please wait ...",allowOutsideClick:!1,onBeforeOpen:function(){q.a.showLoading()}}),console.log(e.id),t.next=10,_.doc("/Dog/".concat(e.id)).update(n);case 10:q.a.fire("Saved",e.name,"success"),a(F()),a(V());case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}}),r=n.values,c=r.url,s=r.name,o=r.description,l=function(){var e=Object(S.a)(D.a.mark((function e(t){var r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.target.files[0])){e.next=8;break}return e.next=4,a(L(r));case 4:c=e.sent,document.querySelector("#inputURL").value=c,n.values.url=c;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)("form",{onSubmit:n.handleSubmit,className:"card card-body border-primary",children:[Object(J.jsxs)("div",{className:"form-group input-group ",children:[Object(J.jsx)("div",{className:"input-group-text bg-light ",children:Object(J.jsx)("i",{className:"material-icons",children:"insert_link"})}),Object(J.jsx)("input",{type:"text",className:"form-control",placeholder:"Url",name:"url",id:"inputURL",value:c,onChange:n.handleChange,onBlur:n.handleBlur,disabled:!0})]}),Object(J.jsx)("input",{id:"fileSelector",type:"file",name:"file",accept:"image/*",style:{display:"none"},onChange:l}),Object(J.jsx)("div",{className:"w-50 btn btn-primary p-0 my-2 text-uppercase fw-bold",children:Object(J.jsx)("input",{type:"button",className:"btn text-white fw-bold",value:"Picture",onClick:function(){document.querySelector("#fileSelector").click()}})}),n.touched.url&&n.errors.url?Object(J.jsx)("div",{className:"text-danger mb-3",children:n.errors.url}):null,Object(J.jsxs)("div",{className:"form-group input-group",children:[Object(J.jsx)("div",{className:"input-group-text bg-light",children:Object(J.jsx)("i",{className:"material-icons",children:"create"})}),Object(J.jsx)("input",{type:"text",name:"name",placeholder:"Name",className:"form-control",value:s,onChange:n.handleChange,onBlur:n.handleBlur})]}),n.touched.name&&n.errors.name?Object(J.jsx)("div",{className:"text-danger mb-3",children:n.errors.name}):null,Object(J.jsx)("div",{className:"form-group mt-3",children:Object(J.jsx)("textarea",{rows:"3",className:"form-control",placeholder:"Write a Description",name:"description",value:o,onChange:n.handleChange,onBlur:n.handleBlur})}),n.touched.description&&n.errors.description?Object(J.jsx)("div",{className:"text-danger mb-3",children:n.errors.description}):null,Object(J.jsx)("button",{type:"submit",className:"btn btn-dark mt-3",children:"Save"})]})},z=function(){var e=Object(i.b)(),t=Object(C.a)({initialValues:{search:""},validationSchema:E.a({search:E.b().required("Email requerido")}),onSubmit:function(){var t;e((t=a,function(){var e=Object(S.a)(D.a.mark((function e(a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:n=e.sent,a(M(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}),a=t.values.search;return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",children:Object(J.jsxs)("div",{className:"container-fluid",children:[Object(J.jsx)(y.b,{className:"navbar-brand",to:"/",children:"DogsApp"}),Object(J.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(J.jsx)("span",{className:"navbar-toggler-icon"})}),Object(J.jsx)("div",{className:"collapse navbar-collapse",id:"navbarColor01",children:Object(J.jsxs)("ul",{className:"navbar-nav me-auto",children:[Object(J.jsx)("li",{className:"nav-item",children:Object(J.jsx)(y.b,{className:"nav-link active",to:"/",children:"Home"})}),Object(J.jsx)("li",{className:"nav-item",children:Object(J.jsx)(y.b,{className:"nav-link",to:"/add",children:"Agregar"})})]})}),Object(J.jsxs)("form",{className:"d-flex",onSubmit:t.handleSubmit,children:[Object(J.jsx)("input",{className:"form-control me-sm-2",type:"text",placeholder:"Search",name:"search",id:"search",value:t.values.search,onChange:t.handleChange}),Object(J.jsx)("button",{className:"btn btn-secondary my-2 my-sm-0",type:"submit",children:"Search"})]})]})})})},G=function(){var e=Object(n.useState)(!1),t=Object(w.a)(e,2),a=t[0],r=t[1],c=Object(i.c)((function(e){return e.dog})).active;return Object(n.useEffect)((function(){c.name.length>0&&r(!0)}),[c]),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(z,{}),Object(J.jsxs)("div",{className:"container ",children:[a?Object(J.jsx)("h2",{className:"my-5",children:"Editar Perro"}):Object(J.jsx)("h2",{className:"my-5",children:"Registrar Perro"}),Object(J.jsx)("div",{className:"row",children:Object(J.jsxs)("div",{className:"col-md-4 text-center py-3 m-auto",children:[Object(J.jsx)("img",{src:"https://res.cloudinary.com/db9wh5uvt/image/upload/v1625536708/perros_e1bfpk.png",className:"App-logo ",alt:"logo"}),Object(J.jsx)(K,{active:c})]})})]})]})},X=function(e){var t=e.pet,a=Object(i.b)(),n=function(){var e=Object(S.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((n=t,{type:p,payload:Object(u.a)({},n)}));case 2:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(S.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(R(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsx)(J.Fragment,{children:t.map((function(e,t){return Object(J.jsxs)("div",{className:"col-md-4 mx-2","data-bs-toggle":"modal","data-bs-target":"#exampleModal".concat(e.id),children:[Object(J.jsx)("div",{className:"card mb-1",children:Object(J.jsx)("div",{className:"card-body",children:Object(J.jsxs)("div",{className:"w-100 d-flex flex-wrap justify-content-center align-items-center text-center",children:[Object(J.jsx)("div",{className:"w-100",children:Object(J.jsx)("img",{src:e.url,alt:"",width:"100px"})}),Object(J.jsx)("div",{className:"w-100",children:Object(J.jsx)("p",{className:"m-0",children:e.name})})]})})}),Object(J.jsx)("div",{className:"modal",id:"exampleModal".concat(e.id),children:Object(J.jsx)("div",{className:"modal-dialog",role:"document",children:Object(J.jsxs)("div",{className:"modal-content",children:[Object(J.jsxs)("div",{className:"modal-header",children:[Object(J.jsx)("h5",{className:"modal-title",children:e.name}),Object(J.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:Object(J.jsx)("span",{"aria-hidden":"true"})})]}),Object(J.jsx)("div",{className:"modal-body",children:Object(J.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(J.jsx)("div",{className:"w-50",children:Object(J.jsx)("img",{src:e.url,alt:e.name,width:"150px"})}),Object(J.jsx)("div",{className:"w-50",children:Object(J.jsx)("p",{children:e.description})})]})}),Object(J.jsxs)("div",{className:"modal-footer",children:[Object(J.jsx)(y.b,{type:"button",className:"btn btn-primary",to:"/edit",onClick:function(){return n(e)},children:"Editar"}),Object(J.jsx)(y.b,{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",to:"/",onClick:function(){return r(e.id)},children:"Eliminar"})]})]})})})]},"".concat(t,"-").concat(e.id))}))})},Z=function(){var e=Object(i.c)((function(e){return e.dog})).dog,t=Object(i.b)();return Object(n.useEffect)((function(){t(F())}),[t]),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(z,{}),Object(J.jsxs)("div",{className:"container",children:[Object(J.jsx)("h2",{className:"my-5",children:"Perros"}),Object(J.jsx)("div",{className:"col-md-10 m-auto",children:Object(J.jsx)("div",{className:"row",children:Object(J.jsx)(X,{pet:e})})})]})]})},H=function(){return Object(J.jsx)(y.a,{children:Object(J.jsxs)(N.d,{children:[Object(J.jsx)(N.b,{exact:!0,path:"/",component:Z}),Object(J.jsx)(N.b,{path:"/edit",component:G}),Object(J.jsx)(N.b,{path:"/add",component:G}),Object(J.jsx)(N.a,{to:"/"})]})})},Q=function(){return Object(J.jsx)(i.a,{store:g,children:Object(J.jsx)(H,{})})};s.a.render(Object(J.jsx)(r.a.StrictMode,{children:Object(J.jsx)(Q,{})}),document.getElementById("root"))}},[[231,1,2]]]);
//# sourceMappingURL=main.3dacc0c5.chunk.js.map